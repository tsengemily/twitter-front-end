(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0742aa47"],{7696:function(t,a,e){"use strict";var s=e("2fa3");a["a"]={signIn:function(t){var a=t.account,e=t.password;return s["b"].post("/users/login",{account:a,password:e})},Admin:function(t){var a=t.account,e=t.password;return s["b"].post("/admin/login",{account:a,password:e})}}},"86a6":function(t,a,e){},a4d8:function(t,a,e){"use strict";e("86a6")},a55b:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("img",{staticClass:"ac-logo",attrs:{src:e("91df"),alt:""}}),s("h2",{staticClass:"row justify-content-center"},[t._v("登入Alphitter")]),s("form",{on:{submit:function(a){return a.preventDefault(),a.stopPropagation(),t.handleSubmit(a)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"account"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"accout",type:"text",placeholder:"帳號",required:""},domProps:{value:t.account},on:{input:function(a){a.target.composing||(t.account=a.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",type:"password",placeholder:"密碼",required:"",autocomplete:"off"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})]),s("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" 登入 ")])]),s("div",{staticClass:"foot-container"},[s("router-link",{staticClass:"foot-container-btn-link",attrs:{to:"/regist"}},[t._v("註冊Alphitter")]),s("router-link",{staticClass:"foot-container-btn-link",attrs:{to:"/admin"}},[t._v("後台登入")])],1)])},r=[],n=e("1da1"),o=(e("96cf"),e("b0c0"),e("7696")),c=e("2fa3"),i={name:"login",data:function(){return{account:"",password:"",isProcessing:!1}},methods:{handleSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.account&&t.password){a.next=4;break}return c["a"].fire({icon:"warning",title:"請填入 email 和 password"}),a.abrupt("return");case 4:return t.isProcessing=!0,a.next=7,o["a"].signIn({account:t.account,password:t.password});case 7:if(e=a.sent,s=e.data,"success"===s.status){a.next=11;break}throw new Error(s.message);case 11:localStorage.setItem("token",s.token),localStorage.setItem("userId",s.user.id),localStorage.setItem("avatar",s.user.avatar),localStorage.setItem("name",s.user.name),t.$store.commit("setCurrentUser",s.user),t.$router.push({path:"/mainpage/".concat(s.user.id)}),a.next=26;break;case 19:a.prev=19,a.t0=a["catch"](0),console.log(a.t0.response.data.message),t.account="",t.password="",c["a"].fire({icon:"warning",title:a.t0.response.data.message}),t.isProcessing=!1;case 26:case"end":return a.stop()}}),a,null,[[0,19]])})))()}}},u=i,l=(e("a4d8"),e("2877")),p=Object(l["a"])(u,s,r,!1,null,"7b8b6ef2",null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-0742aa47.c414c990.js.map