(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3de60c4"],{2032:function(e,t){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},2375:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"spinner"},[r("div",{staticClass:"bouncing-loader"},[r("div"),r("div"),r("div")])])}],a=(r("ef0c"),r("2877")),s={},i=Object(a["a"])(s,n,o,!1,null,"35d9a48c",null);t["a"]=i.exports},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("6795"),o=r("e132"),a=r("a3f3"),s=r("5631");function i(e){return n(e)||o(e)||a(e)||s()}},"2b93":function(e,t,r){"use strict";r("cde9")},"3d04":function(e,t,r){},"4df4":function(e,t,r){"use strict";var n=r("0366"),o=r("7b0b"),a=r("9bdd"),s=r("e95a"),i=r("50c4"),l=r("8418"),c=r("35a1");e.exports=function(e){var t,r,u,f,d,p,g=o(e),w="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,b=void 0!==h,m=c(g),x=0;if(b&&(h=n(h,v>2?arguments[2]:void 0,2)),void 0==m||w==Array&&s(m))for(t=i(g.length),r=new w(t);t>x;x++)p=b?h(g[x],x):g[x],l(r,x,p);else for(f=m.call(g),d=f.next,r=new w;!(u=d.call(f)).done;x++)p=b?a(f,h,[u.value,x],!0):u.value,l(r,x,p);return r.length=x,r}},5631:function(e,t){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},"583d":function(e,t,r){},6795:function(e,t,r){var n=r("2032");function o(e){if(Array.isArray(e))return n(e)}e.exports=o,e.exports["default"]=e.exports,e.exports.__esModule=!0},"9bdd":function(e,t,r){var n=r("825a"),o=r("2a62");e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(s){throw o(e),s}}},a3f3:function(e,t,r){r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3");var n=r("2032");function o(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}e.exports=o,e.exports["default"]=e.exports,e.exports.__esModule=!0},a630:function(e,t,r){var n=r("23e7"),o=r("4df4"),a=r("1c7e"),s=!a((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:s},{from:o})},cc95:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-container"},[e.isLoading?r("Spinner"):[r("div",{staticClass:"row"},[r("div",{staticClass:"left"},[r("Navbar",{attrs:{isSetting:e.isSetting,MainPage:e.MainPage,PersonalInfo:e.PersonalInfo,ChatRoom:e.ChatRoom}})],1),r("div",{staticClass:"main"},[r("UserHeader",{attrs:{"user-id":e.user.id,"user-name":e.user.name,"user-tweets-count":e.user.tweetCount}}),r("ul",{staticClass:"nav"},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"link-btn",attrs:{to:{name:"user-follower",params:{id:e.user.id}}}}),e._v(" 跟隨者 ")],1),r("li",{staticClass:"nav-item active"},[e._v("正在跟隨")])]),e._l(e.followings,(function(e){return r("UserFollowingCard",{key:e.followingId,attrs:{"initial-following":e}})})),e.followings.length<1?r("div",{staticClass:"no-data"},[e._v("沒有正在跟隨")]):e._e()],2),r("div",{staticClass:"right"},[r("div",{staticClass:"top-users-container"},[r("h1",{staticClass:"top-users-title"},[e._v("跟隨誰")]),e._l(e.topUsers,(function(e){return r("Top10User",{key:e.id,attrs:{"initial-top-user":e}})})),r("div",{staticClass:"top-users-more"},[e._v("顯示更多")])],2)])])]],2)},o=[],a=r("1da1"),s=r("5530"),i=(r("96cf"),r("b0c0"),r("d178")),l=r("3e69"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-container d-flex"},[r("router-link",{attrs:{to:{name:"user",params:{id:e.following.followingId}}}},[r("img",{staticClass:"user-avatar",attrs:{src:e.following.following.avatar}})]),r("div",[r("h1",{staticClass:"user-name"},[e._v(" "+e._s(e.following.following.name)+" ")]),r("p",{staticClass:"user-account ml-2"},[e._v(" @"+e._s(e.following.following.account)+" ")]),e.following.followerId===e.currentUser.id?[e.following.isFollowed?[r("button",{staticClass:"follow-btn following",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteFollow(e.following.followingId)}}},[e._v(" 正在跟隨 ")])]:[r("button",{staticClass:"follow-btn follow",class:{disable:e.follower.followerId===e.currentUser.id},attrs:{disabled:e.following.followingId===e.currentUser.id},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollow()}}},[e._v(" "+e._s(e.follower.followerId===e.currentUser.id?"無法跟隨自己":"跟隨")+" ")])]]:e._e(),r("p",{staticClass:"post-txt"},[e._v(" "+e._s(e.following.following.introduction)+" ")])],2)],1)},u=[],f=r("2f62"),d=r("1602"),p=r("2fa3"),g={props:{initialFollowing:{type:Object,require:!0}},data:function(){return{following:this.initialFollowing}},computed:Object(s["a"])({},Object(f["b"])(["currentUser"])),methods:{addFollow:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].addFollow({id:e.following.followingId});case 3:if(r=t.sent,n=r.data,"success"===n.status){t.next=7;break}throw new Error(n.message);case 7:e.following=Object(s["a"])(Object(s["a"])({},e.following),{},{isFollowed:!0}),p["a"].fire({icon:"success",title:"新增跟隨成功"}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),p["a"].fire({icon:"error",title:"無法新增跟隨，請稍後再試"}),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},deleteFollow:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].deleteFollow({userId:e});case 3:if(n=r.sent,o=n.data,"success"===o.status){r.next=7;break}throw new Error(o.message);case 7:t.following=Object(s["a"])(Object(s["a"])({},t.following),{},{isFollowed:!1}),p["a"].fire({icon:"success",title:"取消跟隨成功"}),location.reload(),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),p["a"].fire({icon:"error",title:"無法取消跟隨，請稍後再試"}),console.log(r.t0);case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()}}},w=g,v=(r("ce63"),r("2877")),h=Object(v["a"])(w,c,u,!1,null,"56b2e618",null),b=h.exports,m=r("1ed3"),x=r("2375"),_={name:"UserFollowing",components:{Navbar:i["a"],UserHeader:l["a"],UserFollowingCard:b,Top10User:m["a"],Spinner:x["a"]},data:function(){return{user:{id:-1,name:"",tweetCount:0},followings:[],topUsers:[],isLoading:!0,MainPage:!1,isSetting:!1,PersonalInfo:!1,ChatRoom:!1}},computed:Object(s["a"])({},Object(f["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUser({userId:e}),this.fetchFollowing({userId:e}),this.fetchTopUsers();var t=this.$router.history.current.name;"user-following"===t&&e===this.currentUser.id&&(this.MainPage=!1,this.isSetting=!1,this.PersonalInfo=!0,this.ChatRoom=!1)},methods:{fetchUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o,a,i,l,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.userId,r.prev=1,t.isLoading=!0,r.next=5,d["a"].get({userId:n});case 5:o=r.sent,a=o.data,i=a.id,l=a.name,c=a.tweetCount,t.user=Object(s["a"])(Object(s["a"])({},t.user),{},{id:i,name:l,tweetCount:c}),t.isLoading=!1,r.next=17;break;case 12:r.prev=12,r.t0=r["catch"](1),t.isLoading=!1,console.log("error",r.t0),p["a"].fire({icon:"error",title:"載入資料失敗，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[1,12]])})))()},fetchFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.userId,r.prev=1,t.isLoading=!0,r.next=5,d["a"].getFollowings({userId:n});case 5:o=r.sent,a=o.data,t.followings=a,t.isLoading=!1,r.next=16;break;case 11:r.prev=11,r.t0=r["catch"](1),t.isLoading=!1,console.log("error",r.t0),p["a"].fire({icon:"error",title:"載入資料失敗，請稍後再試"});case 16:case"end":return r.stop()}}),r,null,[[1,11]])})))()},fetchTopUsers:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,d["a"].getUsersTop();case 4:r=t.sent,n=r.data,e.topUsers=n,e.isLoading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),e.isLoading=!1,console.log("error",t.t0),p["a"].fire({icon:"error",title:"載入資料失敗，請稍後再試"});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},beforeRouteUpdate:function(e,t,r){var n=e.params.id;this.fetchUser({userId:n}),this.fetchFollowing({userId:n}),this.fetchTopUsers();var o=this.$router.history.current.name;"user-follower"===o&&n===this.currentUser.id&&(this.MainPage=!1,this.isSetting=!1,this.PersonalInfo=!0,this.ChatRoom=!1),r()}},C=_,y=(r("2b93"),Object(v["a"])(C,n,o,!1,null,"393cee81",null));t["default"]=y.exports},cde9:function(e,t,r){},ce63:function(e,t,r){"use strict";r("3d04")},d28b:function(e,t,r){var n=r("746f");n("iterator")},e132:function(e,t,r){function n(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630"),e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},ef0c:function(e,t,r){"use strict";r("583d")},fb6a:function(e,t,r){"use strict";var n=r("23e7"),o=r("861d"),a=r("e8b5"),s=r("23cb"),i=r("50c4"),l=r("fc6a"),c=r("8418"),u=r("b622"),f=r("1dde"),d=f("slice"),p=u("species"),g=[].slice,w=Math.max;n({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var r,n,u,f=l(this),d=i(f.length),v=s(e,d),h=s(void 0===t?d:t,d);if(a(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?o(r)&&(r=r[p],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(f,v,h);for(n=new(void 0===r?Array:r)(w(h-v,0)),u=0;v<h;v++,u++)v in f&&c(n,u,f[v]);return n.length=u,n}})}}]);
//# sourceMappingURL=chunk-b3de60c4.eec4d9e0.js.map